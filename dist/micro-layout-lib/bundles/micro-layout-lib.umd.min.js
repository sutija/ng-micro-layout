!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/router"),require("@angular/animations"),require("@angular/platform-browser"),require("ng2-order-pipe"),require("@angular/forms"),require("@angular/common"),require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("micro-layout-lib",["exports","@angular/router","@angular/animations","@angular/platform-browser","ng2-order-pipe","@angular/forms","@angular/common","@angular/core","rxjs"],e):e(t["micro-layout-lib"]={},t.ng.router,t.ng.animations,t.ng.platformBrowser,t.ng2OrderPipe,t.ng.forms,t.ng.common,t.ng.core,t.rxjs)}(this,function(t,e,i,n,r,o,s,a,l){"use strict";var u=function(){function t(){}return t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=a.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),c=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:a.Component,args:[{selector:"ml-micro-layout-lib",template:"\n    <p>\n      micro-layout-lib works!\n    </p>\n  "}]}],t.ctorParameters=function(){return[]},t}(),p=function(){function t(){this.disabled=!1,this.types=[],this.type="button",this.title=!1,this.clicked=new a.EventEmitter}return t.prototype.emitClick=function(){this.clicked.emit(!0)},t.prototype.getClass=function(){return"button "+this.types.join(" ")},t.decorators=[{type:a.Component,args:[{selector:"ml-button",template:'<button [ngClass]="getClass()" [disabled]="disabled" [type]="type">\n    <ng-content *ngIf="!title"></ng-content>\n    {{ title ? title : null }}\n</button>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={disabled:[{type:a.Input}],types:[{type:a.Input}],type:[{type:a.Input}],title:[{type:a.Input}],clicked:[{type:a.Output}],emitClick:[{type:a.HostListener,args:["click"]}]},t}(),d=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[p],imports:[n.BrowserModule,s.CommonModule],exports:[p]}]}],t}(),h=function(){function t(){this.isCollapsed=!1,this.canCollapse=!0,this.isCollapsed$=new l.Subject,this.canCollapse$=new l.Subject}return t.prototype.setCanCollapse=function(t){this.canCollapse=t,this.canCollapse$.next(this.canCollapse)},t.prototype.setIsCollapsed=function(t){this.isCollapsed=t,this.isCollapsed$.next(this.isCollapsed)},t.prototype.toggleCollapsed=function(){this.isCollapsed=!this.isCollapsed,this.isCollapsed$.next(this.isCollapsed)},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[]},t}(),g=function(){function t(t){this.cardService=t,this.isCollapsed=!1,this.canCollapse=!0,this.subscriptions$=[]}return t.prototype.ngOnInit=function(){var e=this;this.cardService.setIsCollapsed(this.isCollapsed),this.cardService.setCanCollapse(this.canCollapse),this.subscriptions$.push(this.cardService.isCollapsed$.subscribe(function(t){return e.isCollapsed=t}))},t.prototype.ngOnDestroy=function(){this.subscriptions$.forEach(function(t){return t.unsubscribe()})},t.decorators=[{type:a.Component,args:[{selector:"ml-card, [ml-card]",template:'<div [ngClass]="{\n\'card\': true,\n\'card-collapsed\': isCollapsed\n}">\n  <ng-content select="ml-card-header, [ml-card-header]"></ng-content>\n  <ng-content select="ml-card-container, [ml-card-container]"></ng-content>\n  <ng-content select="ml-card-footer, [ml-card-footer]"></ng-content>\n</div>\n',providers:[h]}]}],t.ctorParameters=function(){return[{type:h}]},t.propDecorators={isCollapsed:[{type:a.Input}],canCollapse:[{type:a.Input}]},t}(),m=function(){function t(t){this.cardService=t,this.canCollapse=!0,this.isCollapsed=!1,this.subscriptions$=[]}return t.prototype.ngOnInit=function(){var e=this;this.subscriptions$.push(this.cardService.isCollapsed$.subscribe(function(t){return e.isCollapsed=t})),this.subscriptions$.push(this.cardService.canCollapse$.subscribe(function(t){return e.canCollapse=t}))},t.prototype.toggleCollapse=function(){this.cardService.toggleCollapsed()},t.prototype.ngOnDestroy=function(){this.subscriptions$.forEach(function(t){return t.unsubscribe()})},t.decorators=[{type:a.Component,args:[{selector:"ml-card-header",template:"<div ngClass=\"wrapper\">\n    <div>\n        <ng-content></ng-content>\n    </div>\n    <div *ngIf=\"canCollapse\" [ngClass]=\"{'toggle-collapse': true, 'collapsed': isCollapsed}\" (click)=\"toggleCollapse()\">{{ isCollapsed ? '+' : '-'}}</div>\n</div>\n"}]}],t.ctorParameters=function(){return[{type:h}]},t}(),f=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:a.Component,args:[{selector:"ml-card-footer",template:'<div ngClass="wrapper">\n    <ng-content></ng-content>\n</div>\n'}]}],t.ctorParameters=function(){return[]},t}(),y=function(){function t(t){this.cardService=t,this.subscriptions$=[]}return t.prototype.ngOnInit=function(){var e=this;this.subscriptions$.push(this.cardService.isCollapsed$.subscribe(function(t){return e.isCollapsed=t}))},t.prototype.ngOnDestroy=function(){this.subscriptions$.forEach(function(t){return t.unsubscribe()})},t.decorators=[{type:a.Component,args:[{selector:"ml-card-container",template:"<div [ngClass]=\"{'wrapper': true, 'collapsed': isCollapsed}\">\n    <ng-content></ng-content>\n</div>\n"}]}],t.ctorParameters=function(){return[{type:h}]},t}(),b=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[g,m,f,y],imports:[s.CommonModule],exports:[g,m,f,y]}]}],t}(),v=function(){function t(t){this.router=t}return t.prototype.onClick=function(){"internal"===this.type?this.router.navigateByUrl(this.target):window.location.href=this.target},t.decorators=[{type:a.Component,args:[{selector:"ml-link",template:'<a ngClass="link" (click)="onClick()">{{title}}</a>\n',styles:[".link{background:0 0;border:none;cursor:pointer}.link:hover{text-decoration:underline}"]}]}],t.ctorParameters=function(){return[{type:e.Router}]},t.propDecorators={title:[{type:a.Input}],target:[{type:a.Input}],type:[{type:a.Input}]},t}(),C=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[v],imports:[s.CommonModule],exports:[v]}]}],t}(),I=function(){function t(){this.progressPercent=0}return t.prototype.ngOnInit=function(){},t.decorators=[{type:a.Component,args:[{selector:"ml-progress",template:'<div class="progress-container">\n    <div class="progress" [ngStyle]="{width: progressPercent + \'%\'}">\n        <span class="progress-text">{{progressText ? progressText : null}}</span>\n    </div>\n</div>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={progressPercent:[{type:a.Input}],progressText:[{type:a.Input}]},t}(),O=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[I],imports:[s.CommonModule],exports:[I]}]}],t}(),D={string:"string",number:"number",textarea:"textarea","switch":"switch",drop:"drop",component:"component",date:"date"},E={canAddRows:!1,canDelete:!1,editOption:"internal",isEditable:!1,isDraggable:!1,isSortable:!1,numberOfItems:[50,100,200],schema:{}},P={previous:"previous",next:"next"},w=function(){function t(t){this.compiler=t,this.dataValue=!1,this.subscriptions$=[],this.dataChange=new a.EventEmitter,this.isEditing=!1,this.isEditable=!0,this.tableColumnTypes=D}return Object.defineProperty(t.prototype,"data",{get:function(){return this.dataValue},set:function(t){this.dataValue=t,this.dataChange.emit(this.dataValue)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){t.data&&this.handleData()},t.prototype.handleData=function(){var e=this;this.dataValue instanceof Array?this.dataValue.forEach(function(t){return e.render(t)}):this.render(this.dataValue)},t.prototype.render=function(t){var n=this;t&&this.columnType===D.component&&(this.componentRef=this.columnComponent.createComponent(this.compiler.resolveComponentFactory(t.component)),t.componentParams.forEach(function(e){e.value instanceof Function?n.componentRef.instance[e.name]&&n.subscriptions$.push(n.componentRef.instance[e.name].subscribe(function(t){e.value(t)})):n.componentRef.instance[e.name]=e.value}))},t.prototype.ngOnDestroy=function(){this.subscriptions$.forEach(function(t){return t.unsubscribe()})},t.decorators=[{type:a.Component,args:[{selector:"ml-table-column, [ml-table-column]",template:'<div\n    *ngIf="data !== null && !isEditing && (columnType !== tableColumnTypes.component)"\n    class="column"\n>\n    <span>{{data}}</span>\n</div>\n<div #columnComponent class="component"></div>\n<div\n        [ngSwitch]="columnType"\n        *ngIf="data !== null && isEditing && isEditable"\n        class="column table-form-element"\n>\n    <textarea *ngSwitchCase="tableColumnTypes.textarea" [(ngModel)]="data"></textarea>\n    <ml-switch *ngSwitchCase="tableColumnTypes.switch" [(ngModel)]="data"></ml-switch>\n    <input *ngSwitchDefault type="text" [(ngModel)]="data"/>\n</div>\n<div class="column column-empty" *ngIf="data === null && !isEditing">/</div>\n'}]}],t.ctorParameters=function(){return[{type:a.ComponentFactoryResolver}]},t.propDecorators={data:[{type:a.Input}],dataChange:[{type:a.Output}],isEditing:[{type:a.Input}],isEditable:[{type:a.Input}],columnType:[{type:a.Input}],columnComponent:[{type:a.ViewChild,args:["columnComponent",{read:a.ViewContainerRef}]}]},t}(),S=function(){function t(){this.isEditable=!1}return t.prototype.getClass=function(t){return t._options&&t._options._backgroundColor?"row "+t._options._backgroundColor:"row"},t.decorators=[{type:a.Component,args:[{selector:"ml-table-container, [ml-table-container]",template:'<tr\n        ml-table-row\n        [ngClass]="getClass(row)"\n        *ngFor="let row of data"\n        [data]="row"\n        [isEditable]="isEditable"></tr>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={data:[{type:a.Input}],isEditable:[{type:a.Input}]},t}(),k=function(t,e){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function x(t,e){function n(){this.constructor=t}k(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function T(e,s,a,l){return new(a||(a=Promise))(function(t,n){function i(t){try{o(l.next(t))}catch(e){n(e)}}function r(t){try{o(l["throw"](t))}catch(e){n(e)}}function o(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(i,r)}o((l=l.apply(e,s||[])).next())})}function $(i,r){var o,s,a,t,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function n(t){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(a=2&t[0]?s["return"]:t[0]?s["throw"]||((a=s["return"])&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){l.label=t[1];break}if(6===t[0]&&l.label<a[1]){l.label=a[1],a=t;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(t);break}a[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(i,l)}catch(e){t=[6,e],s=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([e,t])}}}var _=function(){function t(){}return t.prototype.transform=function(n,i){return n.map(function(t,e){return e%i==0?n.slice(e,e+i):null}).filter(function(t){return t})},t.decorators=[{type:a.Pipe,args:[{name:"arrayToChunks"}]}],t}(),L=function(){function t(){}return t.prototype.setOptions=function(t){this.tableOptions=t},t.prototype.getOptions=function(){return this.tableOptions},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[]},t}(),M=function(){function t(t,e,n){this.tableService=t,this.arrayToChunksPipe=e,this.ng2OrderPipe=n,this.dataChange$=new l.Subject,this.elementSelected$=new l.Subject,this.tableData=new l.Subject,this.orderDir=!1,this.limit=100,this.pageNumber=0}return t.prototype.setLimit=function(t){this.limit=t,this.pageNumber=0,this.data=this.arrayToChunksPipe.transform(this.setColumns(this.schema,this.internalData),this._getLimit()),this.changeData()},t.prototype.getHeaders=function(){return this.schema},t.prototype.generateId=function(t){return Math.round((new Date).getTime()/1e3)+t},t.prototype.setData=function(t,e){var n=this;t[0]&&!t[0]._id?this.internalData=t.map(function(t,e){return t._id=n.generateId(e),t}):this.internalData=t,this.data=this.arrayToChunksPipe.transform(this.setColumns(e,this.internalData),this._getLimit()),this.schema=e,this.changeData()},t.prototype.getData=function(){return this.tableData},t.prototype.goToPage=function(t){this.pageNumber=t,this.changeData()},t.prototype.changeData=function(){var t=this.data[this.pageNumber];this.internalTableData={currentPage:this.pageNumber,data:t,header:this.schema,numberOfPages:this.data.length},this.tableData.next(this.internalTableData)},t.prototype._getLimit=function(){return this.limit?this.limit:this.internalData.length},t.prototype.setColumns=function(i,t){var r=[],o=Object.keys(i);return t.forEach(function(e){var n=Object.keys(e);o.filter(function(t){return!n.includes(t)}).forEach(function(t){return e[t]=i[t].defaultValue}),r.push(e)}),r},t.prototype.itemAdd=function(e){return T(this,void 0,void 0,function(){return $(this,function(t){return this.internalData.push(e),this.dataChange$.next({type:"add",data:e}),[2]})})},t.prototype.itemEdit=function(e){return T(this,void 0,void 0,function(){return $(this,function(t){return this.internalData=this.internalData.map(function(t){return t._id===e._id?e:t}),this.dataChange$.next({type:"edit",data:e}),[2]})})},t.prototype.itemDelete=function(n){return T(this,void 0,void 0,function(){var e;return $(this,function(t){return(e=this.internalData.findIndex(function(t){return t._id===n}))<0?[2,!1]:(this.internalData.splice(e,1),this.dataChange$.next({data:n,type:"delete"}),[2])})})},t.prototype.reorder=function(t){this.orderBy===t?this.orderDir=!this.orderDir:this.orderBy=t,this.pageNumber=0,this.data=this.arrayToChunksPipe.transform(this.setColumns(this.schema,this.ng2OrderPipe.transform(this.internalData,this.orderBy,this.orderDir)),this._getLimit()),this.changeData()},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:L},{type:_},{type:r.Ng2OrderPipe}]},t}(),N=function(){function t(t){this.tableDataService=t,this.isEditable=!1,this.isEditing=!1,this.select=new a.EventEmitter,this.deleteActivated=!1}return t.prototype.ngOnChanges=function(){this._data=Object.assign({},this.data)},t.prototype.elementSelected=function(){this.tableDataService.elementSelected$.next(this._data)},t.prototype.trackColumn=function(t,e){return e?t:null},t.prototype.getColumnsData=function(){return Object.keys(this.tableDataService.getHeaders())},t.prototype.getColumnTypeByKey=function(t){return this.tableDataService.getHeaders()[t].type},t.prototype.getColumnIsEditableByKey=function(t){return this.tableDataService.getHeaders()[t].isEditable},t.prototype.cancel=function(){this._data=Object.assign({},this.data),this.isEditing=!1},t.prototype.edit=function(){this.isEditing=!this.isEditing},t.prototype.save=function(e){return T(this,void 0,void 0,function(){return $(this,function(t){switch(t.label){case 0:return this.isEditing=!1,"add"!==e?[3,2]:[4,this.tableDataService.itemAdd(this.data)];case 1:return t.sent(),[3,4];case 2:return[4,this.tableDataService.itemEdit(this._data)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype["delete"]=function(){this.deleteActivated=!0,confirm('Delete "'+this.data.title+'"?')&&this.tableDataService.itemDelete(this.data._id)},t.decorators=[{type:a.Component,args:[{selector:"ml-table-row, [ml-table-row]",template:'<td\n        ml-table-column\n        [hidden]="key === \'_id\'"\n        *ngFor="let key of getColumnsData(); trackBy: trackColumn"\n        [(data)]="_data[key]"\n        [columnType]="getColumnTypeByKey(key)"\n        [isEditing]="isEditing && getColumnIsEditableByKey(key)"\n        (click)="elementSelected()"\n></td>\n<td *ngIf="isEditable && !isEditing">\n  <button\n          class="table-button"\n          (click)="edit()"\n  >Edit</button>\n  <button class="table-button" (click)="delete()">Delete</button>\n</td>\n<td *ngIf="isEditing">\n  <button class="table-button" (click)="save(\'edit\')" *ngIf="isEditing">Save</button>\n  <button class="table-button" (click)="cancel()" *ngIf="isEditing">Cancel</button>\n</td>\n'}]}],t.ctorParameters=function(){return[{type:M}]},t.propDecorators={data:[{type:a.Input}],isEditable:[{type:a.Input}],isEditing:[{type:a.Input}],select:[{type:a.Output}]},t}(),V=function(){function t(t,e){this.tableDataService=t,this.tableService=e,this.tableID="default",this.add=new a.EventEmitter,this.edit=new a.EventEmitter,this["delete"]=new a.EventEmitter,this.pageChange=new a.EventEmitter,this.numberOfItemsChange=new a.EventEmitter,this.isLoading=!1}return t.prototype.ngOnInit=function(){var e=this;0<this.tableLimit&&this.tableOptions.isInternalPagination&&this.tableDataService.setLimit(this.tableLimit),this.dataChange$=this.tableDataService.dataChange$.subscribe(function(t){return e[t.type].emit(t.data)}),this.getData$=this.tableDataService.getData().subscribe(function(t){e.header=t.header,e.container=t.data,e.tableOptions.isInternalPagination&&(e.numOfPages=t.numberOfPages,e.currentPage=t.currentPage)}),this.tableOptions.isInternalPagination||(this.currentPage=0),this.tableDataService.setData(this.data,this.tableOptions.schema),this.tableDataService.setLimit(this.tableOptions.numberOfItems[0])},t.prototype.ngOnChanges=function(t){t.tableOptions&&(this.tableOptions=Object.assign({},E,this.tableOptions),this.tableService.setOptions(this.tableOptions)),t.data&&this.tableDataService.setData(this.data,this.tableOptions.schema),t.numberOfPages&&(this.numOfPages=this.numberOfPages),t.pageNumber&&(this.currentPage=this.pageNumber),t.tableLimit&&this.tableDataService.setLimit(t.tableLimit.currentValue)},t.prototype.getCurrentPage=function(){return this.currentPage+1},t.prototype.onChangeNumberOfItems=function(t){this.tableLimit=parseInt(t,10),this.tableDataService.setLimit(this.tableLimit),this.numberOfItemsChange.emit(this.tableLimit)},t.prototype.onNextPage=function(){this.tableOptions.isInternalPagination?this.tableDataService.goToPage(this.currentPage+1):this.pageChange.emit({direction:P.next})},t.prototype.onPreviousPage=function(){this.tableOptions.isInternalPagination?this.tableDataService.goToPage(this.currentPage-1):this.pageChange.emit({direction:P.previous})},t.prototype.ngOnDestroy=function(){this.dataChange$.unsubscribe(),this.getData$.unsubscribe()},t.decorators=[{type:a.Component,args:[{selector:"ml-table, [ml-table]",template:'<table\n        [ngClass]="{\n        \'table-isLoading\': isLoading,\n        \'table\': true\n    }"\n>\n    <thead\n            ml-table-header\n            [data]="header"\n            class="header"\n            [isEditable]="tableOptions.isEditable"\n    ></thead>\n    <tbody ml-table-container\n           *ngIf="tableOptions.isDraggable"\n           [isEditable]="tableOptions.isEditable"\n           [data]="container"\n           ngClass="table-container"\n    ></tbody>\n    <tbody\n            ml-table-container\n            class="table-container"\n            *ngIf="!tableOptions.isDraggable"\n            [isEditable]="tableOptions.isEditable"\n           [data]="container"\n    ></tbody>\n</table>\n<div class="table-navigation">\n    <button\n            [disabled]="isLoading"\n            class="table-button"\n            (click)="onPreviousPage()"\n            *ngIf="currentPage > 0"\n    >\n        Previous page\n    </button>\n    <span class="page-information">\n        {{ getCurrentPage() }} / {{ numOfPages }}\n    </span>\n    <button\n            [disabled]="isLoading"\n            class="table-button"\n            (click)="onNextPage()"\n            *ngIf="currentPage < numOfPages - 1"\n    >\n        Next page\n    </button>\n</div>\n<div\n        class="number-of-items"\n        *ngIf="tableOptions.canChangeNumberOfItems"\n>\n    <label># of items</label>\n    <select (change)="onChangeNumberOfItems($event.target.value)">\n        <option\n                *ngFor="let value of tableOptions.numberOfItems"\n                [value]="value"\n        >{{value}}</option>\n    </select>\n</div>\n',changeDetection:a.ChangeDetectionStrategy.OnPush,providers:[M,L,_,r.Ng2OrderPipe]}]}],t.ctorParameters=function(){return[{type:M},{type:L}]},t.propDecorators={tableID:[{type:a.Input}],data:[{type:a.Input}],tableOptions:[{type:a.Input}],tableLimit:[{type:a.Input}],numberOfPages:[{type:a.Input}],pageNumber:[{type:a.Input}],add:[{type:a.Output}],edit:[{type:a.Output}],"delete":[{type:a.Output}],pageChange:[{type:a.Output}],numberOfItemsChange:[{type:a.Output}],isLoading:[{type:a.Input}]},t}(),j=function(e){function t(){var t=e.call(this)||this;return t.change=new a.EventEmitter,t.value=!1,t}return x(t,e),t.prototype.toggleOnOff=function(){this.value=!this.value,this.onChange&&this.onChange(this.value),this.change.emit(this.value)},t.prototype.writeValue=function(t){this.value=t},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){},t.decorators=[{type:a.Component,args:[{selector:"ml-switch",template:'<div [ngClass]="{\'switch-on\': value, \'switch\': true}">\n  <div ngClass="switch-container" (click)="toggleOnOff()">\n    <div ngClass="button"></div>\n  </div>\n</div>\n',providers:[{provide:o.NG_VALUE_ACCESSOR,useExisting:t,multi:!0}]}]}],t.ctorParameters=function(){return[]},t.propDecorators={change:[{type:a.Output}],value:[{type:a.Input}]},t}(o.FormControl),A=function(){function t(){this.items=[],this.disabledIds=[],this.selectedItem$=new l.Subject}return t.prototype.getItemsByParentId=function(e){return this.items.filter(function(t){return t.parentId===e})},t.prototype.getItemById=function(e){return this.items.find(function(t){return t.id===e})},t.prototype.setDisabledIds=function(t){this.disabledIds=t},t.prototype.setItems=function(t){this.items=t},t.prototype.selectItem=function(t){this.selectedItem=t,this.selectedItem$.next(this.selectedItem)},t.prototype.searchByTitle=function(e){if(e)return this.items.filter(function(t){return 0<=t.title.toLowerCase().search(e.toLowerCase())})},t.prototype.getFullPath=function(t){return this.items.reduce(function(t,e){return t&&t[t.length-1].parentId===e.id&&t.push(e),t},[t]).reverse()},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[]},t}(),B="primary",F="attach-to-right",R="flat",U=function(n){function t(t){var e=n.call(this)||this;return e.dropService=t,e.disabledIds=[],e.items=[],e.editable=!1,e.update=new a.EventEmitter,e["delete"]=new a.EventEmitter,e.add=new a.EventEmitter,e.select=new a.EventEmitter,e.dropVisible=!1,e.dropButtonStyles=[F,B,R],e.foundItems=[],e.path=[],e.searchActive=!1,e.selectedItem={title:null,parentId:null,id:null},e}return x(t,n),t.prototype.ngOnInit=function(){var e=this;this.dropService.selectedItem$.subscribe(function(t){return e.selectItem(t)})},t.prototype.activateSearch=function(){this.searchActive=!0},t.prototype.selectItem=function(t){this.path=this.dropService.getFullPath(t),this.selectedItem=t,this.value=t.id,this.searchText=t.title,this.searchActive=!1,this.dropVisible=!1,this.select.emit(t),this.onChange&&this.onChange(this.value)},t.prototype.ngOnChanges=function(t){this.dropService.setItems(this.items),t.value&&0<t.value.currentValue&&this.selectItem(this.dropService.getItemById(this.value)),t.disabledIds&&this.dropService.setDisabledIds(t.disabledIds.currentValue)},t.prototype.dropToggle=function(t){console.log("toggle",this.dropVisible),this.dropVisible=!this.dropVisible},t.prototype.writeValue=function(t){this.value=t},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.onKeyUp=function(t){if("Escape"===t.key)return this.searchActive=!1,void(this.dropVisible=!1);this.foundItems=this.dropService.searchByTitle(this.searchText)},t.decorators=[{type:a.Component,args:[{animations:[i.trigger("toggle",[i.state("visible",i.style({height:"*"})),i.state("hidden",i.style({height:0}))])],changeDetection:a.ChangeDetectionStrategy.OnPush,selector:"ml-drop",template:'<div ngClass="search-and-selected">\n  <div *ngIf="!searchActive" (click)="activateSearch()" ngClass="selected">\n    <span *ngFor="let pathItem of path">{{pathItem.title}}</span>\n  </div>\n  <input *ngIf="searchActive"\n         type="text"\n         [(ngModel)]="searchText"\n         (keyup)="onKeyUp($event)"\n         [autofocus]="searchActive"\n         ngClass="search-field"\n         placeholder="search..."\n  />\n  <ml-button\n          (click)="dropToggle($event)"\n          type="button" ngClass="drop-button"\n          *ngIf="!searchActive"\n          [types]="dropButtonStyles"\n  >\n    <svg ngClass="toggle-image {{dropVisible ? \'-active\' : null}}" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="32" height="16" viewBox="0 0 32 16">\n      <polygon id="toggle-icon" points="16 8.95 7.06 0 0 0 16 16 32 0 24.95 0 16 8.95" style="fill:#231f20"/></svg>\n  </ml-button>\n</div>\n<div *ngIf="searchActive" ngClass="results">\n  <ul>\n    <li *ngFor="let item of foundItems" ngClass="result-item" (click)="selectItem(item)">{{item.title}}</li>\n  </ul>\n</div>\n<div *ngIf="dropVisible" ngClass="drop-list">\n  <ml-drop-items [parentId]="0" [isOpened]="true"></ml-drop-items>\n</div>\n',providers:[A,{provide:o.NG_VALUE_ACCESSOR,useExisting:t,multi:!0}]}]}],t.ctorParameters=function(){return[{type:A}]},t.propDecorators={disabledIds:[{type:a.Input}],items:[{type:a.Input}],value:[{type:a.Input}],editable:[{type:a.Input}],update:[{type:a.Output}],"delete":[{type:a.Output}],add:[{type:a.Output}],select:[{type:a.Output}]},t}(o.FormControl),G=function(){function t(t){this.dropService=t,this.isOpened=!0,this.childrenVisible=[]}return t.prototype.ngOnInit=function(){this.childrenVisible=this.dropService.getItemsByParentId(this.parentId).map(function(){return!1})},t.prototype.getItems=function(){return this.dropService.getItemsByParentId(this.parentId)},t.prototype.hasChildren=function(t){return 0<this.dropService.getItemsByParentId(t).length},t.prototype.selectItem=function(t){this.dropService.selectItem(t)},t.prototype.toggleChildren=function(t){this.childrenVisible[t]=!this.childrenVisible[t]},t.decorators=[{type:a.Component,args:[{selector:"ml-drop-items, [ml-drop-items]",template:'<ul *ngIf="isOpened" ngClass="drop-items">\n    <li *ngFor="let item of getItems(); let i = index;" ngClass="drop-item">\n\n        <button\n                ngClass="button-toggle"\n                *ngIf="hasChildren(item.id)"\n                (click)="toggleChildren(i)"\n        >{{childrenVisible[i] ? \'-\' : \'+\'}}</button>\n\n        <span (click)="selectItem(item)" ngClass="title {{!hasChildren(item.id) ? \'no-children\' : null}}">{{item.title}}</span>\n        <ml-drop-items\n                [parentId]="item.id"\n                [isOpened]="childrenVisible[i]"\n                ngClass="drop-items-children"\n        ></ml-drop-items>\n    </li>\n</ul>\n',providers:[]}]}],t.ctorParameters=function(){return[{type:A}]},t.propDecorators={parentId:[{type:a.Input}],isOpened:[{type:a.Input}]},t}(),K=function(t){function e(){return t.call(this)||this}return x(e,t),e.prototype.update=function(){var t=this.element.nativeElement.value.split(" ").join("-").toLowerCase();this.value=t,this.element.nativeElement.value=t,this.onChange(this.value)},e.prototype.writeValue=function(t){this.value=t},e.prototype.registerOnChange=function(t){this.onChange=t},e.prototype.registerOnTouched=function(t){this.onTouched=t},e.decorators=[{type:a.Component,args:[{selector:"ml-slug",template:'<input type="text" #element (keyup)="update()" [value]="value" />\n',providers:[{provide:o.NG_VALUE_ACCESSOR,useExisting:e,multi:!0}]}]}],e.ctorParameters=function(){return[]},e.propDecorators={value:[{type:a.Input}],element:[{type:a.ViewChild,args:["element"]}]},e}(o.FormControl),q=function(e){function t(){var t=e.call(this)||this;return t.addButtonClass=[R,F],t.removeButtonClass=[R,F],t.parts=[],t}return x(t,e),t.prototype.addPart=function(){var t=this.element.nativeElement;0<t.value.trim().length&&(this.parts.push(t.value.trim()),t.value="",this.update())},t.prototype.removePart=function(t){this.parts.splice(t,1),this.update()},t.prototype.writeValue=function(t){this.value=t,this.value&&(this.parts=this.value.split(","))},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouch=t},t.prototype.onKeyUp=function(t){t.preventDefault(),"Enter"===t.code&&this.addPart()},t.prototype.update=function(){this.value=this.parts.join(","),this.onChange(this.value),this.onTouch(!0)},t.decorators=[{type:a.Component,args:[{selector:"ml-parts",template:'<div ngClass="parts-input">\n  <input (keyup)="onKeyUp($event)" #element />\n  <ml-button (click)="addPart()" type="button" [types]="addButtonClass">add</ml-button>\n</div>\n<div ngClass="parts">\n  <ul>\n    <li *ngFor="let item of parts; let i = index;">\n      <span>{{item}}</span>\n      <ml-button (click)="removePart(i)" type="button" [types]="removeButtonClass">X</ml-button>\n    </li>\n  </ul>\n</div>\n',providers:[{provide:o.NG_VALUE_ACCESSOR,useExisting:t,multi:!0}]}]}],t.ctorParameters=function(){return[]},t.propDecorators={value:[{type:a.Input}],element:[{type:a.ViewChild,args:["element"]}]},t}(o.FormControl),H=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[j,U,G,K,q],imports:[d,s.CommonModule,o.FormsModule,n.BrowserModule],exports:[K,j,q,U,G]}]}],t}(),X=function(){function t(t){this.tableDataService=t,this.data={},this.isEditable=!1}return t.prototype.getData=function(){return this.data&&Object.keys(this.data)||[]},t.prototype.sortItems=function(t){this.tableDataService.reorder(t)},t.decorators=[{type:a.Component,args:[{selector:"ml-table-header, [ml-table-header]",template:'<tr class="header-row">\n    <th\n            [hidden]="columnName === \'_id\'"\n            *ngFor="let columnName of getData()"\n            class="column">\n        <button\n                (click)="sortItems(columnName)"\n                class="table-order-button"\n                title="Click to reorder"\n        >{{data[columnName].title}}\n        </button>\n    </th>\n    <th *ngIf="isEditable">&nbsp;</th>\n</tr>\n'}]}],t.ctorParameters=function(){return[{type:M}]},t.propDecorators={data:[{type:a.Input}],isEditable:[{type:a.Input}]},t}(),Y=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[_],exports:[_]}]}],t}(),z=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[w,S,X,N,V],imports:[o.FormsModule,H,s.CommonModule,Y],exports:[w,S,X,N,V]}]}],t}(),J=function(){function t(){this.hasTimeOut=!1,this.timeout=1e3,this.close=new a.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;this.hasTimeOut&&setTimeout(function(){t.close.emit(!0)},this.timeout)},t.prototype.getClass=function(){return"message "+this.type},t.prototype.onClose=function(){this.close.emit(!0)},t.decorators=[{type:a.Component,args:[{changeDetection:a.ChangeDetectionStrategy.OnPush,selector:"ml-message",template:'<div [ngClass]="getClass()" *ngIf="message">\n    <span ngClass="message-text">{{message}}</span>\n    <button ngClass="message-close" (click)="onClose()">X</button>\n</div>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={message:[{type:a.Input}],type:[{type:a.Input}],hasTimeOut:[{type:a.Input}],timeout:[{type:a.Input}],close:[{type:a.Output}]},t}(),Q=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[J],imports:[s.CommonModule],exports:[J]}]}],t}(),W=function(){function t(){var e=this;this.visible=!1,this.$visible=new l.Subject,window.onkeyup=function(t){t.ctrlKey&&"KeyG"===t.code&&(e.visible=!e.visible,e.$visible.next(e.visible))}}return t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[]},t}(),Z=function(){function t(t){this.virtualGridService=t,this.maxRows=24,this.visible=!1}return t.prototype.ngOnInit=function(){var e=this;this.range=new Array(this.maxRows).fill(null),this.$visible=this.virtualGridService.$visible.subscribe(function(t){return e.visible=t})},t.prototype.toggle=function(t){console.log(t)},t.prototype.ngOnDestroy=function(){this.$visible.unsubscribe()},t.decorators=[{type:a.Component,args:[{selector:"ml-virtual-grid",template:'<div [ngClass]="{\n\'virtual-grid\': true,\n\'-visible\': visible\n}" (keyup)="toggle($event)">\n  <div class="grid-container">\n    <div class="grid">\n      <span *ngFor="let i of range"></span>\n    </div>\n  </div>\n</div>\n',providers:[W],styles:[""]}]}],t.ctorParameters=function(){return[{type:W}]},t.propDecorators={maxRows:[{type:a.Input}]},t}(),tt=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[c,Z],imports:[H,o.FormsModule,s.CommonModule,d,b,C,O,z,r.Ng2OrderModule,Q],exports:[d,b,C,O,z,H,Q,Z],providers:[r.Ng2OrderPipe]}]}],t}();t.MicroLayoutLibService=u,t.MicroLayoutLibComponent=c,t.MicroLayoutLibModule=tt,t.TableModule=z,t.TABLE_COLUMN_TYPES=D,t.DEFAULT_TABLE_OPTIONS=E,t.PAGINATION=P,t.TableService=L,t.TableDataService=M,t.ButtonsModule=d,t.CardModule=b,t.FormModule=H,t.MessageModule=Q,t.ArrayToChunksPipe=_,t.ProgressModule=O,t.VirtualGridComponent=Z,t.ɵh=p,t.ɵm=y,t.ɵl=f,t.ɵk=m,t.ɵj=h,t.ɵi=g,t.ɵe=G,t.ɵc=U,t.ɵd=A,t.ɵg=q,t.ɵf=K,t.ɵb=j,t.ɵn=C,t.ɵo=v,t.ɵw=J,t.ɵv=Y,t.ɵp=I,t.ɵq=w,t.ɵr=S,t.ɵs=X,t.ɵt=N,t.ɵu=V,t.ɵa=W,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=micro-layout-lib.umd.min.js.map