!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/router"),require("rxjs"),require("@angular/animations"),require("@angular/platform-browser"),require("ng2-order-pipe"),require("@angular/forms"),require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("micro-layout-lib",["exports","@angular/router","rxjs","@angular/animations","@angular/platform-browser","ng2-order-pipe","@angular/forms","@angular/common","@angular/core"],e):e(t["micro-layout-lib"]={},t.ng.router,t.rxjs,t.ng.animations,t.ng.platformBrowser,t.ng2OrderPipe,t.ng.forms,t.ng.common,t.ng.core)}(this,function(t,e,o,i,n,r,a,s,l){"use strict";var u=function(){function t(){}return t.decorators=[{type:l.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=l.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),c=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:l.Component,args:[{selector:"ml-micro-layout-lib",template:"\n    <p>\n      micro-layout-lib works!\n    </p>\n  "}]}],t.ctorParameters=function(){return[]},t}(),p=function(){function t(){this.disabled=!1,this.types=[],this.type="button"}return t.prototype.getClass=function(){return"button "+this.types.join(" ")},t.decorators=[{type:l.Component,args:[{selector:"ml-button",template:'<button [ngClass]="getClass()" [disabled]="disabled" [type]="type">\n    <ng-content></ng-content>\n</button>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={disabled:[{type:l.Input}],types:[{type:l.Input}],type:[{type:l.Input}]},t}(),d=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{declarations:[p],imports:[s.CommonModule],exports:[p]}]}],t}(),h=function(){function t(){this.isColapsed=!1}return t.prototype.ngOnInit=function(){},t.decorators=[{type:l.Component,args:[{selector:"ml-card, [ml-card]",template:'<div ngClass="card">\n  <ng-content select="ml-card-header, [ml-card-header]"></ng-content>\n  <ng-content select="ml-card-container, [ml-card-container]"></ng-content>\n  <ng-content select="ml-card-footer, [ml-card-footer]"></ng-content>\n</div>\n'}]}],t.ctorParameters=function(){return[]},t}(),g=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:l.Component,args:[{selector:"ml-card-header",template:'<div ngClass="wrapper">\n    <ng-content></ng-content>\n</div>\n'}]}],t.ctorParameters=function(){return[]},t}(),m=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:l.Component,args:[{selector:"ml-card-footer",template:'<div ngClass="wrapper">\n    <ng-content></ng-content>\n</div>\n'}]}],t.ctorParameters=function(){return[]},t}(),f=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:l.Component,args:[{selector:"ml-card-container",template:'<div ngClass="wrapper">\n    <ng-content></ng-content>\n</div>\n'}]}],t.ctorParameters=function(){return[]},t}(),y=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{declarations:[h,g,m,f],imports:[s.CommonModule],exports:[h,g,m,f]}]}],t}(),b=function(){function t(t){this.router=t}return t.prototype.onClick=function(){this.router.navigateByUrl(this.target)},t.decorators=[{type:l.Component,args:[{selector:"ml-link",template:'<button ngClass="link" type="button" (click)="onClick()">{{title}}</button>\n',styles:[".link{background:0 0;border:none;cursor:pointer}.link:hover{text-decoration:underline}"]}]}],t.ctorParameters=function(){return[{type:e.Router}]},t.propDecorators={title:[{type:l.Input}],target:[{type:l.Input}]},t}(),v=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{declarations:[b],imports:[s.CommonModule],exports:[b]}]}],t}(),C=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:l.Component,args:[{selector:"ml-progress",template:"<progress></progress>\n",styles:[""]}]}],t.ctorParameters=function(){return[]},t}(),I=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{declarations:[C],imports:[s.CommonModule],exports:[C]}]}],t}(),O="ITEM_ADD",E="ITEM_EDIT",P="ITEM_EDIT_STARTED",D="ITEM_DELETE",S="SORT_CLICK",w="DEFAUL",T={STRING:"STRING",NUMBER:"NUMBER",TEXTAREA:"TEXTAREA",SWITCH:"SWITCH",DROP:"DROP",COMPONENT:"COMPONENT",DATE:"DATE"},_={canAddRows:!1,canDelete:!1,editOption:"INTERNAL",isEditable:!1,isReordable:!1,isSortable:!1,schema:{}},k="PREVIOUS",N="NEXT",M=function(){function t(t){this.compiler=t,this.dataValue=!1,this.subscriptions$=[],this.dataChange=new l.EventEmitter,this.clicked=new l.EventEmitter,this.isEditing=!1,this.isEditable=!0,this.tableColumnTypes=T}return Object.defineProperty(t.prototype,"data",{get:function(){return this.dataValue},set:function(t){this.dataValue=t,this.dataChange.emit(this.dataValue)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){t.data&&this.handleData()},t.prototype.onElementClick=function(){this.clicked.emit(!0)},t.prototype.handleData=function(){var e=this;this.dataValue instanceof Array?this.dataValue.forEach(function(t){return e.render(t)}):this.render(this.dataValue)},t.prototype.render=function(t){var n=this;t&&this.columnType===T.COMPONENT&&(this.componentRef=this.columnComponent.createComponent(this.compiler.resolveComponentFactory(t.component)),t.componentParams.forEach(function(e){e.value instanceof Function?n.subscriptions$.push(n.componentRef.instance[e.name].subscribe(function(t){e.value(t)})):n.componentRef.instance[e.name]=e.value}))},t.prototype.ngOnDestroy=function(){this.subscriptions$.forEach(function(t){return t.unsubscribe()})},t.decorators=[{type:l.Component,args:[{selector:"ml-table-column, [ml-table-column]",template:'<div\n    id="{{data.id}}"\n    *ngIf="data !== null && !isEditing && (columnType !== tableColumnTypes.COMPONENT)"\n    ngClass="column"\n>\n    <span (click)="onElementClick()">{{data}}</span>\n</div>\n<div #columnComponent class="COMPONENT"></div>\n<div\n        id="{{ data.id }}"\n        [ngSwitch]="columnType"\n        *ngIf="data !== null && isEditing && isEditable"\n        class="Table__Column Form__Item"\n>\n    <textarea *ngSwitchCase="tableColumnTypes.TEXTAREA" [(ngModel)]="data"></textarea>\n    <ml-switch *ngSwitchCase="tableColumnTypes.SWITCH" [(ngModel)]="data"></ml-switch>\n    <input *ngSwitchDefault type="text" [(ngModel)]="data"/>\n</div>\n<div class="Table__Column Table__Column--empty" *ngIf="data === null && !isEditing">/</div>\n'}]}],t.ctorParameters=function(){return[{type:l.ComponentFactoryResolver}]},t.propDecorators={data:[{type:l.Input}],dataChange:[{type:l.Output}],clicked:[{type:l.Output}],isEditing:[{type:l.Input}],isEditable:[{type:l.Input}],columnType:[{type:l.Input}],columnComponent:[{type:l.ViewChild,args:["columnComponent",{read:l.ViewContainerRef}]}]},t}(),x=function(){function t(){this.isEditable=!1,console.log(this.data)}return t.prototype.getClass=function(t){return t._options&&t._options._backgroundColor?"row "+t._options._backgroundColor:"row"},t.decorators=[{type:l.Component,args:[{selector:"ml-table-container, [ml-table-container]",template:'<tr\n        ml-table-row\n        [ngClass]="getClass(row)"\n        *ngFor="let row of data"\n        [data]="row"\n        [isEditable]="isEditable"></tr>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={data:[{type:l.Input}],isEditable:[{type:l.Input}]},t}(),L=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:l.Component,args:[{selector:"ml-table-footer",template:"<p>\n  table-footer works!\n</p>\n"}]}],t.ctorParameters=function(){return[]},t}(),B=function(t,e){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function V(t,e){function n(){this.constructor=t}B(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var A=function(){function t(){this.message=new l.EventEmitter,this.messageTypes={info:"info",error:"error",warning:"warning",success:"success"}}return t.prototype.notify=function(t){this.message.emit(t)},t.decorators=[{type:l.Injectable}],t.ctorParameters=function(){return[]},t}(),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return V(e,t),e.decorators=[{type:l.Injectable}],e}(A),R=function(){function t(t){this.tableMessagingService=t,this.data={},this.isEditable=!1}return t.prototype.getData=function(){return this.data&&Object.keys(this.data)||[]},t.prototype.sortItems=function(t){this.tableMessagingService.notify({data:{sort_by:t},message:S,type:w})},t.decorators=[{type:l.Component,args:[{selector:"ml-table-header, [ml-table-header]",template:'<tr ngClass="header-row">\n  <th\n          [hidden]="columnName === \'_id\'"\n          *ngFor="let columnName of getData(); let i = index;" ngClass="column">\n    <button\n            (click)="sortItems(columnName)"\n            class="Table__OrderButton"\n            title="Click to reorder"\n    >{{data[columnName].title}}\n    </button>\n  </th>\n  <th *ngIf="isEditable">&nbsp;</th>\n</tr>\n'}]}],t.ctorParameters=function(){return[{type:j}]},t.propDecorators={data:[{type:l.Input}],isEditable:[{type:l.Input}]},t}(),F=function(){function t(){}return t.prototype.transform=function(n,i){return n.map(function(t,e){return e%i==0?n.slice(e,e+i):null}).filter(function(t){return t})},t.decorators=[{type:l.Pipe,args:[{name:"arrayToChunks"}]}],t}(),$=function(){function t(t,e,n){var i=this;this.tableMessagingService=t,this.arrayToChunksPipe=e,this.ng2OrderPipe=n,this.dataChange=new o.Subject,this.elementSelected$=new o.Subject,this.tableData=new o.Subject,this.tableId="table",this.callbacks=[{type:w,message:P,callback:function(){console.log("item edit started")}},{type:w,message:S,callback:function(t){i.reorder(t.sort_by)}},{type:w,message:E,callback:function(t){return i.itemEdit(t)}},{type:w,message:O,callback:null},{type:w,message:D,callback:function(t){confirm("Delete "+t.id+"?")&&i.itemDelete(t.id)}}],this.orderDir=!1,this.limit=null,this.pageNumber=0,this.limit=100,this.tableMessagingService.message.subscribe(function(t){return e=i.callbacks,n=t,void e.filter(function(t){return t.type===n.type&&t.message===n.message}).every(function(t){return t.callback(n.data)});var e,n})}return t.prototype.setTableId=function(t){return console.log("table id",t),this.tableId},t.prototype.setLimit=function(t){this.limit=t,this.pageNumber=0,this.data=null,this.data=this.arrayToChunksPipe.transform(this.setColumns(this.schema,this._data),this._getLimit()),this.changeData()},t.prototype.getLimit=function(){return this.limit},t.prototype.getHeaders=function(){return this.schema},t.prototype.getRows=function(){return this.data},t.prototype.setData=function(t,e){this._data=t,this.data=this.arrayToChunksPipe.transform(this.setColumns(e,this._data),this._getLimit()),this.schema=e,this.changeData()},t.prototype.getData=function(){return this.tableData},t.prototype.goToPage=function(t){this.pageNumber=t,this.changeData()},t.prototype.getNumberOfPages=function(){return this.data.length},t.prototype.changeData=function(){var t=this.data[this.pageNumber];this._tableData={currentPage:this.pageNumber,data:t,header:this.schema,numberOfPages:this.data.length},console.log("table id",this.tableId),this.tableData.next(this._tableData)},t.prototype._getLimit=function(){return this.limit?this.limit:this._data.length},t.prototype.setColumns=function(i,t){var o=[],r=Object.keys(i);return t.forEach(function(e){var n=Object.keys(e);r.filter(function(t){return!n.includes(t)}).forEach(function(t){return e[t]=i[t].defaultValue}),o.push(e)}),o},t.prototype.itemEdit=function(e){this.data=this.data.map(function(t){return t._id===e.row._id?e.row:t}),this.dataChange.next({type:"edit",data:e.row})},t.prototype.itemDelete=function(t){this.dataChange.next({type:"delete",data:t})},t.prototype.resolveItemPagePosition=function(t){},t.prototype.reorder=function(t){this.orderBy===t?this.orderDir=!this.orderDir:this.orderBy=t,this.pageNumber=0,this.data=null,this.data=this.arrayToChunksPipe.transform(this.setColumns(this.schema,this.ng2OrderPipe.transform(this._data,this.orderBy,this.orderDir)),this._getLimit()),this.changeData()},t.decorators=[{type:l.Injectable}],t.ctorParameters=function(){return[{type:j},{type:F},{type:r.Ng2OrderPipe}]},t}(),U=function(){function t(t,e){this.tableMessagingService=t,this.tableDataService=e,this.isEditable=!1,this.isEditing=!1,this.deleteActivated=!1,this.select=new l.EventEmitter}return t.prototype.ngOnChanges=function(){this._data=Object.assign({},this.data)},t.prototype.elementSelected=function(){this.tableDataService.elementSelected$.next(this._data)},t.prototype.trackColumn=function(t,e){return e?t:null},t.prototype.getColumnsData=function(){return Object.keys(this.tableDataService.getHeaders())},t.prototype.getColumnTypeByKey=function(t){return this.tableDataService.getHeaders()[t].type},t.prototype.getColumnIsEditableByKey=function(t){return this.tableDataService.getHeaders()[t].isEditable},t.prototype.getDataByKey=function(t){return this.data[t]},t.prototype.cancel=function(){this._data=Object.assign({},this.data),this.isEditing=!1},t.prototype.edit=function(){this.isEditing=!this.isEditing,this.isEditing&&this.tableMessagingService.notify({type:w,message:P})},t.prototype.save=function(){this.isEditing=!1,this.tableMessagingService.notify({type:w,message:E,data:{row:this._data}})},t.prototype["delete"]=function(){this.deleteActivated=!this.deleteActivated,this.tableMessagingService.notify({type:w,message:D,data:this._data})},t.decorators=[{type:l.Component,args:[{selector:"ml-table-row, [ml-table-row]",template:'<td\n        ml-table-column\n        [hidden]="key === \'_id\'"\n        *ngFor="let key of getColumnsData(); trackBy: trackColumn"\n        [(data)]="_data[key]"\n        [columnType]="getColumnTypeByKey(key)"\n        [isEditing]="isEditing && getColumnIsEditableByKey(key)"\n        (onClick)="elementSelected()"\n></td>\n<td *ngIf="isEditable">\n  <button\n          class="Button Button--small Button--primary"\n          (click)="edit()"\n          *ngIf="!isEditing"\n  >Edit</button>\n  <button class="Button Button--small" (click)="delete()" *ngIf="!isEditing">Delete</button>\n  <button class="Button Button--small Button--primary" (click)="save()" *ngIf="isEditing">Save</button>\n  <button class="Button Button--small" (click)="cancel()" *ngIf="isEditing">Cancel</button>\n</td>\n'}]}],t.ctorParameters=function(){return[{type:j},{type:$}]},t.propDecorators={data:[{type:l.Input}],isEditable:[{type:l.Input}],isEditing:[{type:l.Input}],deleteActivated:[{type:l.Input}],select:[{type:l.Output}]},t}(),K=function(){function t(){this._tableOptions={}}return t.prototype.setTableOptions=function(t,e){this._tableOptions[t]=Object.assign({},e)},t.prototype.getTableOptions=function(){return o.of(this._tableOptions)},t.decorators=[{type:l.Injectable}],t}(),q=function(){function t(t,e,n){this.tableDataService=t,this.tableService=e,this.el=n,this.tableID="default",this.update=new l.EventEmitter,this["delete"]=new l.EventEmitter,this.pageChange=new l.EventEmitter,this.numberOfItemsChange=new l.EventEmitter,this.isLoading=!1}return t.prototype.ngOnInit=function(){var e=this;this.tableDataService.setTableId(this.tableID),0<this.tableLimit&&this.tableOptions.isInternalPagination&&this.tableDataService.setLimit(this.tableLimit),this.dataChange$=this.tableDataService.dataChange.subscribe(function(t){"edit"===t.type&&e.update.emit(t.data),"delete"===t.type&&e["delete"].emit(t.data)}),this.getData$=this.tableDataService.getData().subscribe({next:function(t){e.header=t.header,e.container=t.data,e.tableOptions.isInternalPagination&&(e.numOfPages=t.numberOfPages,e.currentPage=t.currentPage)}}),this.tableOptions.isInternalPagination||(this.currentPage=0),this.tableDataService.setData(this.data,this.tableOptions.schema)},t.prototype.ngOnChanges=function(t){t.tableOptions&&(this.tableService.setTableOptions(this.tableID,this.tableOptions),this.tableOptions=Object.assign({},_,this.tableOptions)),t.data&&this.tableDataService.setData(this.data,this.tableOptions.schema),t.numberOfPages&&(this.numOfPages=this.numberOfPages),t.pageNumber&&(this.currentPage=this.pageNumber),t.tableLimit&&(console.log("table limit",t.tableLimit),this.tableDataService.setLimit(t.tableLimit.currentValue))},t.prototype.getCurrentPage=function(){return this.currentPage+1},t.prototype.onChangeNumberOfItems=function(t){this.tableLimit=t,this.tableDataService.setLimit(this.tableLimit),this.numberOfItemsChange.emit(t)},t.prototype.onNextPage=function(){if(this.tableOptions.isInternalPagination){var t=this.currentPage+1;this.tableDataService.goToPage(t)}else this.pageChange.emit({direction:N})},t.prototype.onPreviousPage=function(){if(this.tableOptions.isInternalPagination){var t=this.currentPage-1;this.tableDataService.goToPage(t)}else this.pageChange.emit({direction:k})},t.prototype.ngOnDestroy=function(){this.dataChange$.unsubscribe(),this.getData$.unsubscribe()},t.decorators=[{type:l.Component,args:[{selector:"ml-table, [ml-table]",template:'<div ngClass="wrapper">\n  <table\n          [ngClass]="{\n        \'table-isLoading\': isLoading,\n        \'table\': true\n    }"\n  >\n    <thead ml-table-header [data]="header" ngClass="header" [isEditable]="tableOptions.isEditable"></thead>\n    <tbody ml-table-container\n           *ngIf="tableOptions.isReordable"\n           [isEditable]="tableOptions.isEditable"\n           [data]="container"\n           ngClass="table-container"\n    ></tbody>\n    <tbody ml-table-container *ngIf="!tableOptions.isReordable" [isEditable]="tableOptions.isEditable" [data]="container" class="Table__Container"></tbody>\n  </table>\n</div>\n<div ngClass="table-navigation">\n  <button [disabled]="isLoading" ngClass="button" (click)="onPreviousPage()" *ngIf="currentPage > 0">Previous page</button>\n  <span ngClass="page-information">{{ getCurrentPage() }} / {{ numOfPages }}</span>\n  <button [disabled]="isLoading" ngClass="button" (click)="onNextPage()" *ngIf="currentPage < numOfPages - 1">Next page</button>\n</div>\n<div *ngIf="tableOptions.canChangeNumberOfItems">\n  <div class="form-Item">\n    <label># of items</label>\n    <select (change)="onChangeNumberOfItems($event.target.value)">\n      <option value="50">50</option>\n      <option value="100">100</option>\n      <option value="200">200</option>\n    </select>\n  </div>\n</div>\n',changeDetection:l.ChangeDetectionStrategy.OnPush,providers:[$,K,j]}]}],t.ctorParameters=function(){return[{type:$},{type:K},{type:l.ElementRef}]},t.propDecorators={tableID:[{type:l.Input}],data:[{type:l.Input}],tableOptions:[{type:l.Input}],tableLimit:[{type:l.Input}],numberOfPages:[{type:l.Input}],pageNumber:[{type:l.Input}],update:[{type:l.Output}],"delete":[{type:l.Output}],pageChange:[{type:l.Output}],numberOfItemsChange:[{type:l.Output}],isLoading:[{type:l.Input}]},t}(),H=function(e){function t(){var t=e.call(this)||this;return t.change=new l.EventEmitter,t.value=!1,t}return V(t,e),t.prototype.toggleOnOff=function(){this.value=!this.value,this.onChange&&this.onChange(this.value),this.change.emit(this.value)},t.prototype.writeValue=function(t){this.value=t},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){},t.decorators=[{type:l.Component,args:[{selector:"ml-switch",template:'<div [ngClass]="{\'switch-on\': value, \'switch\': true}">\n  <div ngClass="switch-container" (click)="toggleOnOff()">\n    <div ngClass="button"></div>\n  </div>\n</div>\n',providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:t,multi:!0}]}]}],t.ctorParameters=function(){return[]},t.propDecorators={change:[{type:l.Output}],value:[{type:l.Input}]},t}(a.FormControl),G=function(){function t(){this.items=[],this.disabledIds=[],this.selectedItem$=new o.Subject}return t.prototype.getItemsByParentId=function(e){return this.items.filter(function(t){return t.parentId===e})},t.prototype.getItemById=function(e){return this.items.find(function(t){return t.id===e})},t.prototype.setDisabledIds=function(t){this.disabledIds=t},t.prototype.setItems=function(t){this.items=t},t.prototype.selectItem=function(t){this.selectedItem=t,this.selectedItem$.next(this.selectedItem)},t.prototype.searchByTitle=function(e){if(e)return this.items.filter(function(t){return 0<=t.title.toLowerCase().search(e.toLowerCase())})},t.prototype.getFullPath=function(t){return this.items.reduce(function(t,e){return t&&t[t.length-1].parentId===e.id&&t.push(e),t},[t]).reverse()},t.decorators=[{type:l.Injectable}],t.ctorParameters=function(){return[]},t}(),X="primary",W="attach-to-right",z="flat",J=function(n){function t(t){var e=n.call(this)||this;return e.dropService=t,e.disabledIds=[],e.items=[],e.editable=!1,e.update=new l.EventEmitter,e["delete"]=new l.EventEmitter,e.add=new l.EventEmitter,e.select=new l.EventEmitter,e.dropVisible=!1,e.dropButtonStyles=[W,X,z],e.foundItems=[],e.path=[],e.searchActive=!1,e.selectedItem={title:null,parentId:null,id:null},e}return V(t,n),t.prototype.ngOnInit=function(){var e=this;this.dropService.selectedItem$.subscribe(function(t){return e.selectItem(t)})},t.prototype.activateSearch=function(){this.searchActive=!0},t.prototype.selectItem=function(t){this.path=this.dropService.getFullPath(t),this.selectedItem=t,this.value=t.id,this.searchText=t.title,this.searchActive=!1,this.dropVisible=!1,this.select.emit(t),this.onChange&&this.onChange(this.value)},t.prototype.ngOnChanges=function(t){this.dropService.setItems(this.items),t.value&&0<t.value.currentValue&&this.selectItem(this.dropService.getItemById(this.value)),t.disabledIds&&this.dropService.setDisabledIds(t.disabledIds.currentValue)},t.prototype.dropToggle=function(t){console.log("toggle",this.dropVisible),this.dropVisible=!this.dropVisible},t.prototype.writeValue=function(t){this.value=t},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.onKeyUp=function(t){if("Escape"===t.key)return this.searchActive=!1,void(this.dropVisible=!1);this.foundItems=this.dropService.searchByTitle(this.searchText)},t.decorators=[{type:l.Component,args:[{animations:[i.trigger("toggle",[i.state("visible",i.style({height:"*"})),i.state("hidden",i.style({height:0}))])],changeDetection:l.ChangeDetectionStrategy.OnPush,selector:"ml-drop",template:'<div ngClass="search-and-selected">\n  <div *ngIf="!searchActive" (click)="activateSearch()" ngClass="selected">\n    <span *ngFor="let pathItem of path">{{pathItem.title}}</span>\n  </div>\n  <input *ngIf="searchActive"\n         type="text"\n         [(ngModel)]="searchText"\n         (keyup)="onKeyUp($event)"\n         [autofocus]="searchActive"\n         ngClass="search-field"\n         placeholder="search..."\n  />\n  <ml-button\n          (click)="dropToggle($event)"\n          type="button" ngClass="drop-button"\n          *ngIf="!searchActive"\n          [types]="dropButtonStyles"\n  >\n    <svg ngClass="toggle-image {{dropVisible ? \'-active\' : null}}" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="32" height="16" viewBox="0 0 32 16">\n      <polygon id="toggle-icon" points="16 8.95 7.06 0 0 0 16 16 32 0 24.95 0 16 8.95" style="fill:#231f20"/></svg>\n  </ml-button>\n</div>\n<div *ngIf="searchActive" ngClass="results">\n  <ul>\n    <li *ngFor="let item of foundItems" ngClass="result-item" (click)="selectItem(item)">{{item.title}}</li>\n  </ul>\n</div>\n<div *ngIf="dropVisible" ngClass="drop-list">\n  <ml-drop-items [parentId]="0" [isOpened]="true"></ml-drop-items>\n</div>\n',providers:[G,{provide:a.NG_VALUE_ACCESSOR,useExisting:t,multi:!0}]}]}],t.ctorParameters=function(){return[{type:G}]},t.propDecorators={disabledIds:[{type:l.Input}],items:[{type:l.Input}],value:[{type:l.Input}],editable:[{type:l.Input}],update:[{type:l.Output}],"delete":[{type:l.Output}],add:[{type:l.Output}],select:[{type:l.Output}]},t}(a.FormControl),Q=function(){function t(t){this.dropService=t,this.isOpened=!0,this.childrenVisible=[]}return t.prototype.ngOnInit=function(){this.childrenVisible=this.dropService.getItemsByParentId(this.parentId).map(function(){return!1})},t.prototype.getItems=function(){return this.dropService.getItemsByParentId(this.parentId)},t.prototype.hasChildren=function(t){return 0<this.dropService.getItemsByParentId(t).length},t.prototype.selectItem=function(t){this.dropService.selectItem(t)},t.prototype.toggleChildren=function(t){this.childrenVisible[t]=!this.childrenVisible[t]},t.decorators=[{type:l.Component,args:[{selector:"ml-drop-items, [ml-drop-items]",template:'<ul *ngIf="isOpened" ngClass="drop-items">\n    <li *ngFor="let item of getItems(); let i = index;" ngClass="drop-item">\n\n        <button\n                ngClass="button-toggle"\n                *ngIf="hasChildren(item.id)"\n                (click)="toggleChildren(i)"\n        >{{childrenVisible[i] ? \'-\' : \'+\'}}</button>\n\n        <span (click)="selectItem(item)" ngClass="title {{!hasChildren(item.id) ? \'no-children\' : null}}">{{item.title}}</span>\n        <ml-drop-items\n                [parentId]="item.id"\n                [isOpened]="childrenVisible[i]"\n                ngClass="drop-items-children"\n        ></ml-drop-items>\n    </li>\n</ul>\n'}]}],t.ctorParameters=function(){return[{type:G}]},t.propDecorators={parentId:[{type:l.Input}],isOpened:[{type:l.Input}]},t}(),Y=function(t){function e(){return t.call(this)||this}return V(e,t),e.prototype.update=function(){var t=this.element.nativeElement.value.split(" ").join("-").toLowerCase();this.value=t,this.element.nativeElement.value=t,this.onChange(this.value)},e.prototype.writeValue=function(t){this.value=t},e.prototype.registerOnChange=function(t){this.onChange=t},e.prototype.registerOnTouched=function(t){this.onTouch=t},e.decorators=[{type:l.Component,args:[{selector:"ml-alias",template:'<input type="text" #element (keyup)="update()" (focus)="onTouch(true)" [value]="value" />\n',providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:e,multi:!0}]}]}],e.ctorParameters=function(){return[]},e.propDecorators={value:[{type:l.Input}],element:[{type:l.ViewChild,args:["element"]}]},e}(a.FormControl),Z=function(e){function t(){var t=e.call(this)||this;return t.addButtonClass=[z,W],t.removeButtonClass=[z,W],t.parts=[],t}return V(t,e),t.prototype.addPart=function(){var t=this.element.nativeElement;0<t.value.trim().length&&(this.parts.push(t.value.trim()),t.value="",this.update())},t.prototype.removePart=function(t){this.parts.splice(t,1),this.update()},t.prototype.writeValue=function(t){this.value=t,this.value&&(this.parts=this.value.split(","))},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouch=t},t.prototype.onKeyUp=function(t){t.preventDefault(),"Enter"===t.code&&this.addPart()},t.prototype.update=function(){this.value=this.parts.join(","),this.onChange(this.value),this.onTouch(!0)},t.decorators=[{type:l.Component,args:[{selector:"ml-parts",template:'<div ngClass="parts-input">\n  <input (keyup)="onKeyUp($event)" #element />\n  <ml-button (click)="addPart()" type="button" [types]="addButtonClass">add</ml-button>\n</div>\n<div ngClass="parts">\n  <ul>\n    <li *ngFor="let item of parts; let i = index;">\n      <span>{{item}}</span>\n      <ml-button (click)="removePart(i)" type="button" [types]="removeButtonClass">X</ml-button>\n    </li>\n  </ul>\n</div>\n',providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:t,multi:!0}]}]}],t.ctorParameters=function(){return[]},t.propDecorators={value:[{type:l.Input}],element:[{type:l.ViewChild,args:["element"]}]},t}(a.FormControl),tt=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{declarations:[H,J,Q,Y,Z],imports:[d,s.CommonModule,a.FormsModule,n.BrowserModule],exports:[Y,H,Z,J,Q]}]}],t}(),et=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{declarations:[M,x,L,R,U,q],imports:[a.FormsModule,tt,s.CommonModule],exports:[M,x,L,R,U,q]}]}],t}(),nt=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.getClass=function(){return"message "+this.type},t.decorators=[{type:l.Component,args:[{changeDetection:l.ChangeDetectionStrategy.OnPush,selector:"ml-message",template:'<div [ngClass]="getClass()" *ngIf="message">{{message}}</div>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={message:[{type:l.Input}],type:[{type:l.Input}]},t}(),it=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{declarations:[nt],imports:[s.CommonModule],exports:[nt]}]}],t}(),ot=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{declarations:[F,c],imports:[tt,a.FormsModule,s.CommonModule,d,y,v,I,et,r.Ng2OrderModule,it],exports:[d,y,v,I,et,tt,it],providers:[F,r.Ng2OrderPipe]}]}],t}();t.MicroLayoutLibService=u,t.MicroLayoutLibComponent=c,t.MicroLayoutLibModule=ot,t.ɵj=p,t.ɵi=d,t.ɵo=f,t.ɵn=m,t.ɵm=g,t.ɵk=y,t.ɵl=h,t.ɵg=Y,t.ɵf=Q,t.ɵd=J,t.ɵe=G,t.ɵb=tt,t.ɵh=Z,t.ɵc=H,t.ɵp=v,t.ɵq=b,t.ɵbe=it,t.ɵbf=nt,t.ɵa=F,t.ɵr=I,t.ɵs=C,t.ɵz=A,t.ɵu=M,t.ɵv=x,t.ɵbb=$,t.ɵw=L,t.ɵx=R,t.ɵy=j,t.ɵba=U,t.ɵt=et,t.ɵbd=K,t.ɵbc=q,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=micro-layout-lib.umd.min.js.map